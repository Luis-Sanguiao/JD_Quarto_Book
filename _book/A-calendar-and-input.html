<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>JDemetra+ documentation - Calendar and user-defined corrections</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./A-benchmarking.html" rel="next">
<link href="./A-outlier-detection.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Calendar and user-defined corrections</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">JDemetra+ documentation</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./G-what-is-jd.html" class="sidebar-item-text sidebar-link">JDemetra+ Software</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./P_Algorithms.html" class="sidebar-item-text sidebar-link">Algorithms</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-sa.html" class="sidebar-item-text sidebar-link">Seasonal Adjustment</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-sa-hf.html" class="sidebar-item-text sidebar-link">Seasonal adjustment of high-frequency data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-outlier-detection.html" class="sidebar-item-text sidebar-link">Outlier detection</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-calendar-and-input.html" class="sidebar-item-text sidebar-link active">Calendar and user-defined corrections</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-benchmarking.html" class="sidebar-item-text sidebar-link">Benchmarking and temporal disagreggation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-trend-cycle-estimation.html" class="sidebar-item-text sidebar-link">Trend-cycle estimation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-nowcasting.html" class="sidebar-item-text sidebar-link">Nowcasting</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./P_Tools.html" class="sidebar-item-text sidebar-link">Tools</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./T-graphical-user-interface.html" class="sidebar-item-text sidebar-link">Graphical User Interface</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./T-r-packages.html" class="sidebar-item-text sidebar-link">Using JDemetra+ in R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./T-Production-tools-cruncher-QR.html" class="sidebar-item-text sidebar-link">Production, Cruncher and quality report</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./T-rev-policies-production.html" class="sidebar-item-text sidebar-link">Production and revision policies</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./T-plug-ins.html" class="sidebar-item-text sidebar-link">Plug-ins for JDemetra+</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./P_Methods.html" class="sidebar-item-text sidebar-link">Methods</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-spectral-analysis.html" class="sidebar-item-text sidebar-link">Spectral Analysis Principles and Tools</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-reg-arima-modelling.html" class="sidebar-item-text sidebar-link">Reg-Arima models</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-X11-decomposition.html" class="sidebar-item-text sidebar-link">X-11 decomposition</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-STL-decomposition.html" class="sidebar-item-text sidebar-link">STL: Local regression decomposition</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-SEATS-decomposition.html" class="sidebar-item-text sidebar-link">SEATS decomposition</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-Trend-Estimation-Local-Polynomials.html" class="sidebar-item-text sidebar-link">Local Polynomials Methods for Trend Estimation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-tests.html" class="sidebar-item-text sidebar-link">Tests</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-state-space-framework.html" class="sidebar-item-text sidebar-link">State space modelling</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-Temp-Disagg-Bench.html" class="sidebar-item-text sidebar-link">Temporal disaggregation and benchmarking</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#in-this-chapter" id="toc-in-this-chapter" class="nav-link active" data-scroll-target="#in-this-chapter">In this chapter</a></li>
  <li><a href="#overview-of-calendar-effects-in-jdemetra" id="toc-overview-of-calendar-effects-in-jdemetra" class="nav-link" data-scroll-target="#overview-of-calendar-effects-in-jdemetra">Overview of Calendar effects in JDemetra</a></li>
  <li><a href="#summary-of-the-method-used-in-jdemetra-to-compute-trading-day-and-working-day-effects" id="toc-summary-of-the-method-used-in-jdemetra-to-compute-trading-day-and-working-day-effects" class="nav-link" data-scroll-target="#summary-of-the-method-used-in-jdemetra-to-compute-trading-day-and-working-day-effects">Summary of the method used in JDemetra+ to compute trading day and working day effects</a></li>
  <li><a href="#mean-and-seasonal-effects-of-calendar-variables" id="toc-mean-and-seasonal-effects-of-calendar-variables" class="nav-link" data-scroll-target="#mean-and-seasonal-effects-of-calendar-variables">Mean and seasonal effects of calendar variables</a></li>
  <li><a href="#impact-of-the-mean-effects-on-the-decomposition" id="toc-impact-of-the-mean-effects-on-the-decomposition" class="nav-link" data-scroll-target="#impact-of-the-mean-effects-on-the-decomposition">Impact of the mean effects on the decomposition</a></li>
  <li><a href="#linear-transformations-of-the-calendar-variables" id="toc-linear-transformations-of-the-calendar-variables" class="nav-link" data-scroll-target="#linear-transformations-of-the-calendar-variables">Linear transformations of the calendar variables</a></li>
  <li><a href="#handling-of-specific-holidays" id="toc-handling-of-specific-holidays" class="nav-link" data-scroll-target="#handling-of-specific-holidays">Handling of specific holidays</a></li>
  <li><a href="#holidays-with-a-validity-period" id="toc-holidays-with-a-validity-period" class="nav-link" data-scroll-target="#holidays-with-a-validity-period">Holidays with a validity period</a></li>
  <li><a href="#different-kinds-of-calendars" id="toc-different-kinds-of-calendars" class="nav-link" data-scroll-target="#different-kinds-of-calendars">Different Kinds of calendars</a></li>
  <li><a href="#tests-for-residual-trading-days" id="toc-tests-for-residual-trading-days" class="nav-link" data-scroll-target="#tests-for-residual-trading-days">Tests for residual trading days</a></li>
  <li><a href="#customizing-calendars" id="toc-customizing-calendars" class="nav-link" data-scroll-target="#customizing-calendars">Customizing calendars</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Calendar and user-defined corrections</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="in-this-chapter" class="level3">
<h3 class="anchored" data-anchor-id="in-this-chapter">In this chapter</h3>
<p>This chapter will describe</p>
<ul>
<li><p>underlying principles and concepts of calendar correction</p></li>
<li><p>generating process of calendars, calendar regressors, outliers and other input variables.</p></li>
</ul>
<p>How to use these variables inside a seasonal adjustment process is detailed in chapters on <a href="./A-sa.html">SA</a> or <a href="./A-sa-hf.html">SA of HF data</a>.</p>
</section>
<section id="overview-of-calendar-effects-in-jdemetra" class="level3">
<h3 class="anchored" data-anchor-id="overview-of-calendar-effects-in-jdemetra">Overview of Calendar effects in JDemetra</h3>
<p>A natural way for modelling calendar effects consists of distributing the days of each period into different groups. The regression variable corresponding to a type of day (a group) is simply defined by the number of days it contains for each period. Usual classifications are:</p>
<ul>
<li><p>Trading days (7 groups): each day of the week defines a group (Mondays,...,Sundays);</p></li>
<li><p>Working days (2 groups): week days and weekends.</p></li>
</ul>
<p>The definition of a group could involve partial days. For instance, we could consider that one half of Saturdays belong to week days and the second half to weekends.</p>
<p>Usually, specific holidays are handled as Sundays and they are included in the group corresponding to “non-working days”. This approach assumes that the economic activity on national holidays is the same (or very close to) the level of activity that is typical for Sundays. Alternatively, specific holidays can be considered separately, e.g.&nbsp;by the specification that divided days into three groups:</p>
<ul>
<li><p>Working days (Mondays to Fridays, except for specific holidays),</p></li>
<li><p>Non-working days (Saturdays and Sundays, except for specific holidays),</p></li>
<li><p>Specific holidays.</p></li>
</ul>
</section>
<section id="summary-of-the-method-used-in-jdemetra-to-compute-trading-day-and-working-day-effects" class="level3">
<h3 class="anchored" data-anchor-id="summary-of-the-method-used-in-jdemetra-to-compute-trading-day-and-working-day-effects">Summary of the method used in JDemetra+ to compute trading day and working day effects</h3>
<p>The computation of trading day and working days effects is performed in four steps:</p>
<ol type="1">
<li><p>Computation of the number of each weekday performed for all periods.</p></li>
<li><p>Calculation of the usual contrast variables for trading day and working day.</p></li>
<li><p>Correction of the contrast variables with specific holidays (for each holiday add +1 to the number of Sundays and subtract 1 from the number of days of the holiday). The correction is not performed if the holiday falls on a Sunday, taking into account the validity period of the holiday.</p></li>
<li><p>Correction of the constant variables for long term mean effects, &gt; taking into account the validity period of the holiday; see below &gt; for the different cases.</p></li>
</ol>
<p>The corrections of the constant variables may receive a weight corresponding to the part of the holiday considered as a Sunday.</p>
<p>An example below illustrates the application of the above algorithm for the hypothetical country in which three holidays are celebrated:</p>
<ul>
<li><p>New Year (a fixed holiday, celebrated on 01 January);</p></li>
<li><p>Shrove Tuesday (a moving holiday, which falls 47 days before Easter Sunday, celebrated until the end of 2012);</p></li>
<li><p>Freedom day (a fixed holiday, celebrated on 25 April).</p></li>
</ul>
<p>The consecutive steps in calculation of the calendar for 2012 and 2013 years are explained below.</p>
<p>First, the number of each day of the week in the given month is calculated as it is shown in table below.</p>
<p><strong>Number of each weekday in different months</strong></p>
<table class="table">
<colgroup>
<col style="width: 14%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Month</strong></th>
<th><strong>Mon</strong></th>
<th><strong>Tue</strong></th>
<th><strong>Wed</strong></th>
<th><strong>Thu</strong></th>
<th><strong>Fri</strong></th>
<th><strong>Sat</strong></th>
<th><strong>Sun</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Jan-12</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td>Feb-12</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Mar-12</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>4</td>
</tr>
<tr class="even">
<td>Apr-12</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="odd">
<td>May-12</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="even">
<td>Jun-12</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Jul-12</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td>Aug-12</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Sep-12</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>5</td>
</tr>
<tr class="even">
<td>Oct-12</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Nov-12</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="even">
<td>Dec-12</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>5</td>
</tr>
<tr class="odd">
<td>Jan-13</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="even">
<td>Feb-13</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Mar-13</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>5</td>
</tr>
<tr class="even">
<td>Apr-13</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="odd">
<td>May-13</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="even">
<td>Jun-13</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>5</td>
</tr>
<tr class="odd">
<td>Jul-13</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="even">
<td>Aug-13</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Sep-13</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td>Oct-13</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Nov-13</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>4</td>
</tr>
<tr class="even">
<td>Dec-13</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>5</td>
</tr>
</tbody>
</table>
<p>Next, the contrast variables are calculated (table below) as a result of the linear transformation applied to the variables presented in table below.</p>
<p><strong>Contrast variables (series corrected for leap year effects)</strong></p>
<table class="table">
<colgroup>
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Month</strong></th>
<th><strong>Mon</strong></th>
<th><strong>Tue</strong></th>
<th><strong>Wed</strong></th>
<th><strong>Thu</strong></th>
<th><strong>Fri</strong></th>
<th><strong>Sat</strong></th>
<th><strong>Length</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Jan-12</td>
<td>0</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Feb-12</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0.75</td>
</tr>
<tr class="odd">
<td>Mar-12</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Apr-12</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>May-12</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Jun-12</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Jul-12</td>
<td>0</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Aug-12</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Sep-12</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Oct-12</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Nov-12</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Dec-12</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Jan-13</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Feb-13</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>-0.25</td>
</tr>
<tr class="odd">
<td>Mar-13</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Apr-13</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>May-13</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Jun-13</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Jul-13</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Aug-13</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Sep-13</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Oct-13</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Nov-13</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Dec-13</td>
<td>5</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>In the next step the corrections for holidays is done in the following way:</p>
<ul>
<li><p>New Year: In 2012 it falls on a Sunday. Therefore no correction is applied. In 2013 it falls on a Tuesday. Consequently, the following corrections are applied to the number of each weekday in January: Tuesday -1, Sunday +1, so the following corrections are applied to the contrast variables: -2 for Tuesday and -1 for the other contrast variables.</p></li>
<li><p>Shrove Tuesday: It is a fixed day of the week holiday that always falls on Tuesday. For this reason in 2012 the following corrections are applied to the number of each weekday in February: Tuesday -1, Sunday +1, so the following corrections are applied to the contrast variables: -2 for the contrast variable associated with Tuesday, and -1 for the other contrast variables. The holiday expires at the end of 2012. Therefore no corrections are made for 2013.</p></li>
<li><p>Freedom Day: In 2012 it falls on a Wednesday. Consequently, the following corrections are applied to the number of each weekday in April: Wednesday -1, Sunday +1, so the following corrections are applied to the contrast variables: -2 for Wednesday and -1 for the other contrast variables. In 2013 it falls on Thursday. Therefore, the following corrections are applied to the number of each weekday in April: Thursday -1, Sunday +1, so the following corrections are applied to the contrast variables: -2 for Thursday, and -1 for the other contrast variables.</p></li>
</ul>
<p>The result of these corrections is presented in table below.</p>
<p><strong>Contrast variables corrected for holidays</strong></p>
<table class="table">
<colgroup>
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Month</strong></th>
<th><strong>Mon</strong></th>
<th><strong>Tue</strong></th>
<th><strong>Wed</strong></th>
<th><strong>Thu</strong></th>
<th><strong>Fri</strong></th>
<th><strong>Sat</strong></th>
<th><strong>Length</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Jan-12</td>
<td>0</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Feb-12</td>
<td>-1</td>
<td>-2</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0.75</td>
</tr>
<tr class="odd">
<td>Mar-12</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Apr-12</td>
<td>-1</td>
<td>-2</td>
<td>-3</td>
<td>-2</td>
<td>-2</td>
<td>-2</td>
<td>0</td>
</tr>
<tr class="odd">
<td>May-12</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Jun-12</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Jul-12</td>
<td>0</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Aug-12</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Sep-12</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Oct-12</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Nov-12</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Dec-12</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Jan-13</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Feb-13</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>-0.25</td>
</tr>
<tr class="odd">
<td>Mar-13</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Apr-13</td>
<td>0</td>
<td>0</td>
<td>-1</td>
<td>-2</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>May-13</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Jun-13</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Jul-13</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Aug-13</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Sep-13</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Oct-13</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Nov-13</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Dec-13</td>
<td>0</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>Finally, the long term corrections are applied on each year of the validity period of the holiday.</p>
<ul>
<li><p>New Year: Correction on the contrasts: +1, to be applied to January of 2012 and 2013.</p></li>
<li><p>Shrove Tuesday: It may fall either in February or in March. It will fall in March if Easter is on or after 17 April. Taking into account the theoretical distribution of Easter, it gives: prob(March) = +0.22147, prob(February) = +0.77853. The correction of the contrasts will be +1.55707 for Tuesday in February 2012 and +0.77853 for the other contrast variables. The correction of the contrasts will be +0.44293 for Tuesday in March 2012, +0.22147 for the other contrast variables.</p></li>
<li><p>Freedom Day: Correction on the contrasts: +1, to be applied to April of 2012 and 2013.</p></li>
</ul>
<p>The modifications due to the corrections described above are presented in table below.</p>
<p><strong>Trading day variables corrected for the long term effects</strong></p>
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Month</strong></th>
<th><strong>Mon</strong></th>
<th><strong>Tue</strong></th>
<th><strong>Wed</strong></th>
<th><strong>Thu</strong></th>
<th><strong>Fri</strong></th>
<th><strong>Sat</strong></th>
<th><strong>Length</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Jan-12</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Feb-12</td>
<td>-0.22115</td>
<td>-0.44229</td>
<td>0.778853</td>
<td>-0.22115</td>
<td>-0.22115</td>
<td>-0.22115</td>
<td>0.75</td>
</tr>
<tr class="odd">
<td>Mar-12</td>
<td>0.221147</td>
<td>0.442293</td>
<td>0.221147</td>
<td>1.221147</td>
<td>1.221147</td>
<td>1.221147</td>
<td>0</td>
</tr>
<tr class="even">
<td>Apr-12</td>
<td>0</td>
<td>-1</td>
<td>-2</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>May-12</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Jun-12</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Jul-12</td>
<td>0</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Aug-12</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Sep-12</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Oct-12</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Nov-12</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Dec-12</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Jan-13</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Feb-13</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>-0.25</td>
</tr>
<tr class="odd">
<td>Mar-13</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Apr-13</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>-1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>May-13</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Jun-13</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Jul-13</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>Aug-13</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Sep-13</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Oct-13</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Nov-13</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td>Dec-13</td>
<td>0</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>0</td>
</tr>
</tbody>
</table>
</section>
<section id="mean-and-seasonal-effects-of-calendar-variables" class="level3">
<h3 class="anchored" data-anchor-id="mean-and-seasonal-effects-of-calendar-variables">Mean and seasonal effects of calendar variables</h3>
<p>The calendar effects produced by the regression variables that fulfil the definition presented above include a mean effect (i.e.&nbsp;an effect that is independent of the period) and a seasonal effect (i.e.&nbsp;an effect that is dependent of the period and on average it is equal to 0). Such an outcome is inappropriate, as in the usual decomposition of a series the mean effect should be allocated to the trend component and the fixed seasonal effect should be affected to the corresponding component. Therefore, the actual calendar effect should only contain effects that don’t belong to the other components.</p>
<p>In the context of JDemetra+ the mean effect and the seasonal effect are long term theoretical effects rather than the effects computed on the time span of the considered series (which should be continuously revised).</p>
<p>The mean effect of a calendar variable is the average number of days in its group. Taking into account that one year has on average 365.25 days, the monthly mean effects for a working days are, as shown in the table below, 21.7411 for week days and 8.696 for weekends.</p>
<p><strong>Monthly mean effects for the Working day variable</strong></p>
<table class="table">
<thead>
<tr class="header">
<th><strong>Groups of Working day effect</strong></th>
<th><strong>Mean effect</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Week days</td>
<td>365.25/12*5/7 = <strong>21.7411</strong></td>
</tr>
<tr class="even">
<td>Weekends</td>
<td>365.25/12*2/7 = <strong>8.696</strong></td>
</tr>
<tr class="odd">
<td>Total</td>
<td>365.25/12 = <strong>30.4375</strong></td>
</tr>
</tbody>
</table>
<p>The number of days by period is highly seasonal, as apart from February, the length of each month is the same every year. For this reason, any set of calendar variables will contain, at least in some variables, a significant seasonal effect, which is defined as the average number of days by period (Januaries..., first quarters...) outside the mean effect. Removing that fixed seasonal effects consists of removing for each period the long term average of days that belong to it. The calculation of a seasonal effect for the working days classification is presented in the table below.</p>
<p><strong>The mean effect and the seasonal effect for the calendar periods</strong></p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Period</strong></th>
<th><strong>Average number of days</strong></th>
<th><strong>Average number of week days</strong></th>
<th><strong>Mean effect</strong></th>
<th><strong>Seasonal effect</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>January</td>
<td>31</td>
<td>31*5/7=22.1429</td>
<td>21.7411</td>
<td>0.4018</td>
</tr>
<tr class="even">
<td>February</td>
<td>28.25</td>
<td>28.25*5/7=20.1786</td>
<td>21.7411</td>
<td>-1.5625</td>
</tr>
<tr class="odd">
<td>March</td>
<td>31</td>
<td>31*5/7=22.1429</td>
<td>21.7411</td>
<td>0.4018</td>
</tr>
<tr class="even">
<td>April</td>
<td>30</td>
<td>30*5/7=21.4286</td>
<td>21.7411</td>
<td>-0.3125</td>
</tr>
<tr class="odd">
<td>May</td>
<td>31</td>
<td>31*5/7=22.1429</td>
<td>21.7411</td>
<td>0.4018</td>
</tr>
<tr class="even">
<td>June</td>
<td>30</td>
<td>30*5/7=21.4286</td>
<td>21.7411</td>
<td>-0.3125</td>
</tr>
<tr class="odd">
<td>July</td>
<td>31</td>
<td>31*5/7=22.1429</td>
<td>21.7411</td>
<td>0.4018</td>
</tr>
<tr class="even">
<td>August</td>
<td>31</td>
<td>31*5/7=22.1429</td>
<td>21.7411</td>
<td>0.4018</td>
</tr>
<tr class="odd">
<td>September</td>
<td>30</td>
<td>30*5/7=21.4286</td>
<td>21.7411</td>
<td>-0.3125</td>
</tr>
<tr class="even">
<td>October</td>
<td>31</td>
<td>31*5/7=22.1429</td>
<td>21.7411</td>
<td>0.4018</td>
</tr>
<tr class="odd">
<td>November</td>
<td>30</td>
<td>30*5/7=21.4286</td>
<td>21.7411</td>
<td>-0.3125</td>
</tr>
<tr class="even">
<td>December</td>
<td>31</td>
<td>31*5/7=22.1429</td>
<td>21.7411</td>
<td>0.4018</td>
</tr>
<tr class="odd">
<td>Total</td>
<td>365.25</td>
<td>260.8929</td>
<td>260.8929</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>For a given time span, the actual calendar effect for week days can be easily calculated as the difference between the number of week days in a specific period and the sum of the mean effect and the seasonal effect assigned to this period, as it is shown in the table below for the period 01.2013 – 06.2013.</p>
<p><strong>The calendar effect for the period 01.2013 - 06.2013</strong></p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Time period (t)</strong></th>
<th><strong>Week days</strong></th>
<th><strong>Mean effect</strong></th>
<th><strong>Seasonal effect</strong></th>
<th><strong>Calendar effect</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Jan-2013</td>
<td>23</td>
<td>21.7411</td>
<td>0.4018</td>
<td>0.8571</td>
</tr>
<tr class="even">
<td>Feb-2013</td>
<td>20</td>
<td>21.7411</td>
<td>-1.5625</td>
<td>-0.1786</td>
</tr>
<tr class="odd">
<td>Mar-2013</td>
<td>21</td>
<td>21.7411</td>
<td>0.4018</td>
<td>-1.1429</td>
</tr>
<tr class="even">
<td>Apr-2013</td>
<td>22</td>
<td>21.7411</td>
<td>-0.3125</td>
<td>0.5714</td>
</tr>
<tr class="odd">
<td>May-2013</td>
<td>23</td>
<td>21.7411</td>
<td>0.4018</td>
<td>0.8571</td>
</tr>
<tr class="even">
<td>Jun-2013</td>
<td>20</td>
<td>21.7411</td>
<td>-0.3125</td>
<td>-1.4286</td>
</tr>
<tr class="odd">
<td>Jul-2013</td>
<td>23</td>
<td>21.7411</td>
<td>0.4018</td>
<td>0.8571</td>
</tr>
</tbody>
</table>
<p>The distinction between the mean effect and the seasonal effect is usually unnecessary. Those effects can be considered together (simply called mean effects) and be computed by removing from each calendar variable its average number of days by period. These global means effect are considered in the next section.</p>
</section>
<section id="impact-of-the-mean-effects-on-the-decomposition" class="level3">
<h3 class="anchored" data-anchor-id="impact-of-the-mean-effects-on-the-decomposition">Impact of the mean effects on the decomposition</h3>
<p>When the ARIMA model contains a seasonal difference – something that should always happen with calendar variables – the mean effects contained in the calendar variables are automatically eliminated, so that they don’t modify the estimation. The model is indeed estimated on the series/regression variables after differencing. However, they lead to a different linearised series (<span class="math inline">\(y_{\text{lin}})\)</span>. The impact of other corrections (mean and/or fixed seasonal) on the decomposition is presented in the next paragraph. Such corrections could be obtained, for instance, by applying other solutions for the long term corrections or by computing them on the time span of the series.</p>
<p>Now the model with “correct” calendar effects (denoted as <span class="math inline">\(C\)</span>), i.e.&nbsp;effects without mean and fixed seasonal effects, can be considered. To simplify the problem, the model has no other regression effects.</p>
<p>For such a model the following relations hold:</p>
<p><span class="math display">\[y_{\text{lin}} = \ y - C\]</span><br>
<span class="math display">\[T = \ F_{T}\left( y_{\text{lin}} \right)\]</span><br>
<span class="math display">\[S = \ F_{S}\left( y_{\text{lin}} \right) + C\]</span><br>
<span class="math display">\[I = \ F_{I}\left( y_{\text{lin}} \right)\]</span></p>
<p>where:</p>
<p>T - the trend;</p>
<p>S - the seasonal component;</p>
<p>I - the irregular component;</p>
<p><span class="math inline">\(F_{X}\)</span> - the linear filter for the component X.</p>
<p>Consider next other calendar effects (<span class="math inline">\(\widetilde{C}\)</span>) that contain some mean (<span class="math inline">\(\text{cm}\)</span>, integrated to the final trend) and fixed seasonal effects (<span class="math inline">\(\text{cs}\)</span>, integrated to the final seasonal). The modified equations are now:</p>
<p><span class="math display">\[\widetilde{C} = C + cm + cs\]</span><br>
<span class="math display">\[{\widetilde{y}}_{\text{lin}} = \ y - \widetilde{C} = \ y_{\text{lin}} - cm - cs\]</span><br>
<span class="math display">\[\widetilde{T} = \ F_{T}\left( {\widetilde{y}}_{\text{lin}} \right) + cm\]</span><br>
<span class="math display">\[\widetilde{S} = \ F_{S}\left( {\widetilde{y}}_{\text{lin}} \right) + C + cs\]</span><br>
<span class="math display">\[\widetilde{I} = \ F_{I}\left( {\widetilde{y}}_{\text{lin}} \right)\]</span></p>
<p>Taking into account that <span class="math inline">\(F_{X}\)</span> is a linear transformation and that<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p><span class="math display">\[F_{T}\left( \text{cm} \right) = cm\]</span><br>
<span class="math display">\[F_{T}\left( \text{cs} \right) = 0\]</span><br>
<span class="math display">\[F_{S}\left( \text{cm} \right) = 0\ \]</span><br>
<span class="math display">\[F_{S}\left( \text{cs} \right) = cs\]</span><br>
<span class="math display">\[F_{I}\left( \text{cm} \right) = 0\]</span><br>
<span class="math display">\[F_{I}\left( \text{cs} \right) = 0\]</span></p>
<p>The following relationships hold:</p>
<p><span class="math display">\[\widetilde{T} = \ F_{T}\left( {\widetilde{y}}_{\text{lin}} \right) + cm = F_{T}\left( y_{\text{lin}} \right) - cm + cm = T\]</span><br>
<span class="math display">\[\widetilde{S} = \ F_{S}\left( {\widetilde{y}}_{\text{lin}} \right) + C + cs = F_{S}\left( y_{\text{lin}} \right) - cs + C + cs = S\]</span><br>
<span class="math display">\[\widetilde{I} = \ I\]</span></p>
<p>If we don’t take into account the effects and apply the same approach as in the “correct” calendar effects, we will get:</p>
<p><span class="math display">\[\breve{T} = \ F_{T}\left( {\widetilde{y}}_{\text{lin}} \right) = T - cm\]</span><br>
<span class="math display">\[\breve{S} = \ F_{S}\left( {\widetilde{y}}_{\text{lin}} \right) + \widetilde{C} = S + cm\]</span><br>
<span class="math display">\[\breve{I} = \ F_{I}\left( {\widetilde{y}}_{\text{lin}} \right) = I\]</span></p>
<p>The trend, seasonal and seasonally adjusted series will only differ by a (usually small) constant.</p>
<p>In summary, the decomposition does not depend on the mean and fixed seasonal effects used for the calendar effects, provided that those effects are integrated in the corresponding final components. If these corrections are not taken into account, the main series of the decomposition will only differ by a constant.</p>
</section>
<section id="linear-transformations-of-the-calendar-variables" class="level3">
<h3 class="anchored" data-anchor-id="linear-transformations-of-the-calendar-variables">Linear transformations of the calendar variables</h3>
<p>As far as the RegARIMA and the TRAMO models are considered, any non-degenerated linear transformation of the calendar variables can be used. It will produce the same results (likelihood, residuals, parameters, joint effect of the calendar variables, joint F-test on the coefficients of the calendar variables…). The linearised series that will be further decomposed is invariant to any linear transformation of the calendar variables.</p>
<p>However, it should be mentioned that choices of calendar corrections based on the tests on the individual t statistics are dependent on the transformation, which is rather arbitrary. This is the case in old versions of TRAMO-SEATS. That is why the joint F-test (as in the version of TRAMO-SEATS implemented in TSW+) should be preferred.</p>
<p>An example of a linear transformation is the calculation of the contrast variables. In the case of the usual trading day variables, they are defined by the following transformation: the 6 contrast variables (<span class="math inline">\(\text{No.}\left( \text{Mondays} \right) - No.\left( \text{Sundays} \right),\ldots No.\left( \text{Saturdays} \right) - No.(Sundays)\)</span>) used with the length of period.</p>
<p><span class="math display">\[\begin{bmatrix}                 
  1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; - 1 \\    
  0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; - 1 \\    
  0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; - 1 \\    
  0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; - 1 \\    
  0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; - 1 \\    
  0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; - 1 \\    
  1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 \\      
  \end{bmatrix}\begin{bmatrix}      
  \text{Mon} \\                     
  \text{Tue} \\                     
  \text{Wed} \\                     
  \text{Thu} \\                     
  \text{Fri} \\                     
  \text{Sat} \\                     
  \text{Sun} \\                     
  \end{bmatrix} = \begin{bmatrix}   
  Mon - Sun \\                      
  Tue - Sun \\                      
  Wed - Sun \\                      
  Thu - Sun \\                      
  Fri - Sun \\                      
  Sat - Sun \\                      
  \text{Length of period} \\      
  \end{bmatrix}\]</span></p>
<p>For the usual working day variables, two variables are used: one contrast variable and the length of period</p>
<p><span class="math display">\[\begin{bmatrix}                  
  1 &amp; - \frac{5}{2} \\              
  1 &amp; 1 \\                          
  \end{bmatrix}\begin{bmatrix}      
  \text{Week} \\                    
  \text{Weekend} \\                 
  \end{bmatrix} = \begin{bmatrix}   
  \text{Contrast week} \\          
  \text{Length of period} \\      
  \end{bmatrix}\]</span></p>
<p>The <span class="math inline">\(\text{Length of period}\)</span> variable is defined as a deviation from the length of the month (in days) and the average month length, which is equal to <span class="math inline">\(30.4375.\)</span> Instead, the leap-year variable can be used here (see Regression sections in <a href="../reference-manual/modelling-spec-arima.html#regression">RegARIMA</a> or <a href="../reference-manual/modelling-spec-tramo.html#regression">Tramo</a>)<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<p>Such transformations have several advantages. They suppress from the contrast variables the mean and the seasonal effects, which are concentrated in the last variable. So, they lead to fewer correlated variables, which are more appropriate to be included in the regression model. The sum of the effects of each day of the week estimated with the trading (working) day contrast variables cancel out.</p>
</section>
<section id="handling-of-specific-holidays" class="level3">
<h3 class="anchored" data-anchor-id="handling-of-specific-holidays">Handling of specific holidays</h3>
<p>check vs GUI (v3) and rjd3 modelling</p>
<p>Three types of holidays are implemented in JDemetra+:</p>
<ul>
<li><p>Fixed days, corresponding to the fixed dates in the year (e.g.&nbsp;New Year, Christmas).</p></li>
<li><p>Easter related days, corresponding to the days that are defined in relation to Easter (e.g.&nbsp;Easter +/- n days; example: Ascension, Pentecost).</p></li>
<li><p>Fixed week days, corresponding to the fixed days in a given week of a given month (e.g.&nbsp;Labor Day celebrated in the USA on the first Monday of September).</p></li>
</ul>
<p>From a conceptual point of view, specific holidays are handled in exactly the same way as the other days. It should be decided, however, to which group of days they belong. Usually they are handled as Sundays. This convention is also used in JDemetra+. Therefore, except if the holiday falls on a Sunday, the appearance of a holiday leads to correction in two groups, i.e.&nbsp;in the group that contains the weekday, in which holiday falls, and the group that contains the Sundays.</p>
<p>Country specific holidays have an impact on the mean and the seasonal effects of calendar effects. Therefore, the appropriate corrections to the number of particular days (which are usually the basis for the definition of other calendar variables) should be applied, following the kind of holidays. These corrections are applied to the period(s) that may contain the holiday. The long term corrections in JDemetra+ don’t take into account the fact that some moving holidays could fall on the same day (for instance the May Day and the Ascension). However, those events are exceptional, and their impact on the final result is usually not significant.</p>
<section id="fixed-day" class="level4">
<h4 class="anchored" data-anchor-id="fixed-day">Fixed day</h4>
<p>The probability that the holiday falls on a given day of the week is 1/7. Therefore, the probability to have 1 day more that is treated like Sunday is 6/7. The effect on the means for the period that contains the fixed day is presented in the table below (the correction on the calendar effect has the opposite sign).</p>
<p><strong>The effect of the fixed holiday on the period, in which it occurred</strong></p>
<table class="table">
<thead>
<tr class="header">
<th><strong>Sundays</strong></th>
<th><strong>Others days</strong></th>
<th><strong>Contrast variables</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>+ 6/7</td>
<td>- 1/7</td>
<td>1/7 - (+ 6/7)= -1</td>
</tr>
</tbody>
</table>
</section>
<section id="easter-related-days" class="level4">
<h4 class="anchored" data-anchor-id="easter-related-days">Easter related days</h4>
<p>Easter related days always fall the same week day (denoted as Y in the table below: The effects of the Easter Sunday on the seasonal means). However, they can fall during different periods (months or quarters). Suppose that, taking into account the distribution of the dates for Easter and the fact that this holiday falls in one of two periods, the probability that Easter falls during the period <span class="math inline">\(m\)</span> is <span class="math inline">\(p\)</span>, which implies that the probability that it falls in the period <span class="math inline">\(m + 1\)</span> is <span class="math inline">\(1 - p\)</span>. The effects of Easter on the seasonal means are presented in the table below.</p>
<p><strong>The effects of the Easter Sunday on the seasonal means</strong></p>
<p>|<strong>Period</strong> | <strong>Sundays</strong> <strong>Days X</strong> <strong>Others days</strong> <strong>Contrast Y</strong> <strong>Other contrasts</strong> |————| ————- ———— —————– ——————- ——————— |m |+ p - p 0 - 2p - p |m+1 | + (1-p) - (1-p) 0 - 2<span class="math inline">\(\times\)</span>(1-p) - (1-p)</p>
<p>The distribution of the dates for Easter may be approximated in different ways. One of the solutions consists of using some well-known algorithms for computing Easter on a very long period. JDemetra+ provides the Meeus/Jones/Butcher’s and the Ron Mallen’s algorithms (they are identical till year 4100, but they slightly differ after that date). Another approach consists in deriving a raw theoretical distribution based on the definition of Easter. It is the solution used for Easter related days. It is shortly explained below.</p>
<p>The date of Easter in the given year is the first Sunday after the full moon (the Paschal Full Moon) following the northern hemisphere’s vernal equinox. The definition is influenced by the Christian tradition, according to which the equinox is reckoned to be on 21 March<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> and the full moon is not necessarily the astronomically correct date. However, when the full moon falls on Sunday, then Easter is delayed by one week. With this definition, the date of Easter Sunday varies between 22 March and 25 April. Taking into account that an average lunar month is <span class="math inline">\(29.530595\)</span> days the approximated distribution of Easter can be derived. These calculations do not take into account the actual ecclesiastical moon calendar.</p>
<p>For example, the probability that Easter Sunday falls on 25 March is 0.004838 and results from the facts that the probability that 25 March falls on a Sunday is <span class="math inline">\(1/7\)</span> and the probability that the full moon is on 21 March, 22 March, 23 March or 24 March is <span class="math inline">\(5/29.53059\)</span>. The probability that Easter falls on 24 April is 0.01708 and results from the fact that the probability that 24 April is Sunday is <span class="math inline">\(1/7\)</span> and takes into account that 18 April is the last acceptable date for the full moon. Therefore the probability that the full moon is on 16 April or 17 April is <span class="math inline">\(1/29.53059\)</span> and the probability that the full moon is on 18 April is <span class="math inline">\(1.53059/29.53059\)</span>.</p>
<p><strong>The approximated distribution of Easter dates</strong></p>
<table class="table">
<thead>
<tr class="header">
<th><strong>Day</strong></th>
<th><strong>Probability</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>22 March</td>
<td>1/7 * 1/29.53059</td>
</tr>
<tr class="even">
<td>23 March</td>
<td>1/7 * 2/29.53059</td>
</tr>
<tr class="odd">
<td>24 March</td>
<td>1/7 * 3/29.53059</td>
</tr>
<tr class="even">
<td>25 March</td>
<td>1/7 * 4/29.53059</td>
</tr>
<tr class="odd">
<td>26 March</td>
<td>1/7 * 5/29.53059</td>
</tr>
<tr class="even">
<td>27 March</td>
<td>1/7 * 6/29.53059</td>
</tr>
<tr class="odd">
<td>28 March</td>
<td>1/29.53059</td>
</tr>
<tr class="even">
<td>29 March</td>
<td>1/29.53059</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
</tr>
<tr class="even">
<td>18 April</td>
<td>1/29.53059</td>
</tr>
<tr class="odd">
<td>19 April</td>
<td>1/7 * (6 + 1.53059)/29.53059</td>
</tr>
<tr class="even">
<td>20 April</td>
<td>1/7 * (5 + 1.53059)/29.53059</td>
</tr>
<tr class="odd">
<td>21 April</td>
<td>1/7 * (4 + 1.53059)/29.53059</td>
</tr>
<tr class="even">
<td>22 April</td>
<td>1/7 * (3 + 1.53059)/29.53059</td>
</tr>
<tr class="odd">
<td>23 April</td>
<td>1/7 * (2 + 1.53059)/29.53059</td>
</tr>
<tr class="even">
<td>24 April</td>
<td>1/7 * (1 + 1.53059)/29.53059</td>
</tr>
<tr class="odd">
<td>25 April</td>
<td>1/7 * 1.53059/29.53059</td>
</tr>
</tbody>
</table>
</section>
<section id="fixed-week-days" class="level4">
<h4 class="anchored" data-anchor-id="fixed-week-days">Fixed week days</h4>
<p>Fixed week days always fall on the same week day (denoted as Y in the table below) and in the same period. Their effect on the seasonal means is presented in the table below.</p>
<p><strong>The effect of the fixed week holiday on the period, in which it occurred</strong></p>
<table class="table">
<thead>
<tr class="header">
<th><strong>Sundays</strong></th>
<th><strong>Day Y</strong></th>
<th><strong>Others days</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>+ 1</td>
<td>- 1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>The impact of fixed week days on the regression variables is zero because the effect itself is compensated by the correction for the mean effect.</p>
</section>
</section>
<section id="holidays-with-a-validity-period" class="level3">
<h3 class="anchored" data-anchor-id="holidays-with-a-validity-period">Holidays with a validity period</h3>
<p>When a holiday is valid only for a given time span, JDemetra+ applies the long term mean corrections only on the corresponding period. However, those corrections are computed in the same way as in the general case.</p>
<p>It is important to note that using or not using mean corrections will impact in the estimation of the RegARIMA and TRAMO models. Indeed, the mean corrections do not disappear after differencing. The differences between the SA series computed with or without mean corrections will no longer be constant.</p>
</section>
<section id="different-kinds-of-calendars" class="level3">
<h3 class="anchored" data-anchor-id="different-kinds-of-calendars">Different Kinds of calendars</h3>
<p>see link with GUI</p>
<p>This scenario presents how to define different kinds of calendars. These calendars can be applied to the specifications that take into account country-specific holidays and can be used for detecting and estimating the calendar effects.</p>
<p>The calendar effects are those parts of the movements in the time series that are caused by different number of weekdays in calendar months (or quarters). They arise as the number of occurrences of each day of the week in a month (or a quarter) differs from year to year. These differences cause regular effects in some series. In particular, such variation is caused by a leap year effect because of an extra day inserted into February every four years. As with seasonal effects, it is desirable to estimate and remove calendar effects from the time series.</p>
<p>The calendar effects can be divided into a mean effect, a seasonal part and a structural part. The mean effect is independent from the period and therefore should be allocated to the trend-cycle. The seasonal part arises from the properties of the calendar that recur each year. For one thing, the number of working days of months with 31 calendar days is on average larger than that of months with 30 calendar days. This effect is part of the seasonal pattern captured by the seasonal component (with the exception of leap year effects). The structural part of the calendar effect remains to be determined by the calendar adjustment. For example, the number of working days of the same month in different years varies from year to year.</p>
<p>Both X-12-ARIMA/X-13ARIMA-SEATS and TRAMO/SEATS estimate calendar effects by adding some regressors to the equation estimated in the pre-processing part (RegARIMA or TRAMO, respectively). Regressors mentioned above are generated from the default calendar or the user defined calendar.</p>
<p>The calendars of JDemetra+ simply correspond to the usual trading days contrast variables based on the Gregorian calendar, modified to take into account some specific holidays. Those holidays are handled as “Sundays” and the variables are properly adjusted to take into account the long term mean effects.</p>
</section>
<section id="tests-for-residual-trading-days" class="level3">
<h3 class="anchored" data-anchor-id="tests-for-residual-trading-days">Tests for residual trading days</h3>
<p>We consider below tests on the seasonally adjusted series (<span class="math inline">\(sa_t\)</span>) or on the irregular component (<span class="math inline">\(irr_t\)</span>). When the reasoning applies on both components, we will use <span class="math inline">\(y_t\)</span>. The functions <span class="math inline">\(stdev\)</span> stands for “standard deviation” and <span class="math inline">\(rms\)</span> for “root mean squares”</p>
<p>The tests are computed on the log-transformed components in the case of multiplicative decomposition.</p>
<p>TD are the usual contrasts of trading days, 6 variables (no specific calendar).</p>
<section id="non-significant-irregular" class="level4">
<h4 class="anchored" data-anchor-id="non-significant-irregular">Non significant irregular</h4>
<p>When <span class="math inline">\(irr_t\)</span> is not significant, we don’t compute the test on it, to avoid irrelevant results. We consider that <span class="math inline">\(irr_t\)</span> is significant if <span class="math inline">\(stdev( irr_t)&gt;0.01\)</span> (multiplicative case) or if <span class="math inline">\(stdev(irr_t)/rms(sa_t) &gt;0.01\)</span> (additive case).</p>
</section>
<section id="f-test" class="level4">
<h4 class="anchored" data-anchor-id="f-test">F test</h4>
<p>The test is the usual joint F-test on the TD coefficients, computed on the following models:</p>
<section id="autoregressive-model-ar-modelling-option" class="level5">
<h5 class="anchored" data-anchor-id="autoregressive-model-ar-modelling-option">Autoregressive model (AR modelling option)</h5>
<p>We compute by OLS:</p>
<p><span class="math display">\[y_t=\mu + \alpha y_{t-1} + \beta TD_t + \epsilon_t \]</span></p>
</section>
<section id="difference-model" class="level5">
<h5 class="anchored" data-anchor-id="difference-model">Difference model</h5>
<p>We compute by OLS:</p>
<p><span class="math display">\[\Delta y_t - \overline{\Delta y_t}=\beta TD_t + \epsilon_t \]</span></p>
<p>So, the latter model is a restriction of the first one (<span class="math inline">\(\alpha =1, \mu =μ=\overline{\Delta y_t}\)</span>)</p>
<p>The tests are the usual joint F-tests on <span class="math inline">\(\beta \quad (H_0:\beta=0)\)</span>.</p>
<p>By default, we compute the tests on the 8 last years of the components, so that they might highlight moving calendar effects.</p>
<p>Remark:</p>
<p>In Tramo, a similar test is computed on the residuals of the Arima model. More exactly, the F-test is computed on <span class="math inline">\(e_t=\beta TD_t + \epsilon_t\)</span>, where <span class="math inline">\(e_t\)</span> are the one-step-ahead forecast errors.</p>
</section>
</section>
</section>
<section id="customizing-calendars" class="level3">
<h3 class="anchored" data-anchor-id="customizing-calendars">Customizing calendars</h3>
<p>There three ways to build customized calendars taking into account national holidays</p>
<pre><code>- In the Graphical User Interface </code></pre>
<p>The resulting calendar can be directly linked to the calendar correction option in GUI while running a seasonal adjustment processing (see SA chapter, link)</p>
<pre><code>- In R </code></pre>
<p>The resulting calendar will allow to generate customized regressors which can then be added while running a seasonal adjustment processing via GUI (link) or in R (link).</p>
<pre><code>- Directly writing xml files </code></pre>
<section id="pre-defined-holidays" class="level4">
<h4 class="anchored" data-anchor-id="pre-defined-holidays">Pre-Defined Holidays</h4>
<p>A <em>Special days</em> list is pre-defined for most commonly occurring holidays.</p>
<pre><code>{: .table .table-style}
  | **Holiday**    |    **Definition**| 
  ----------------- ----------------------------------------------------------------------------------------------------------------------------| 
 |  New Year       |   Fixed holiday, falls on January, 1.| 
 | Ash Wednesday   |   Moving holiday, occurring 46 days before Easter.| 
 | Easter          |   Moving holiday, varies between March, 22 and April, 25.| 
 |  Maundy Thursday|   Moving holiday, falls on the Thursday before Easter.| 
 |  Good Friday    |   Moving holiday, falls on the Friday before Easter.| 
 |  Easter Monday  |   Moving holiday, falls on the day after Easter.| 
 |  Ascension Day  |   Moving holiday, celebrated on Thursday, 40 days after Easter.| 
 |  Pentecost      |   Moving holiday, celebrated 50 days after Easter Sunday.| 
 |  Whit Monday    |   Moving holiday, falling on the day after Pentecost.| 
 |  May Day        |   Fixed holiday, falls on May, 1.| 
 |  Assumption     |   Fixed holiday, falls on August, 15.| 
 |  Halloween      |   Fixed holiday, falls on October, 31.| 
 |  All Saints Day |   Fixed holiday, falls on November, 1.| 
 |  Thanksgiving   |   Moving holiday, celebrated on the second Monday of October (Canada) or on the fourth Thursday of November (United States).| 
 | Christmas Day   |   Fixed holiday, falls on December, 25.| </code></pre>
</section>
<section id="in-gui" class="level4">
<h4 class="anchored" data-anchor-id="in-gui">In GUI</h4>
<section id="default-calendar" class="level5">
<h5 class="anchored" data-anchor-id="default-calendar">Default Calendar</h5>
<p>In the graphical user interface, calendars in are stored in the <em>Workspace</em> window in the <em>Utilities</em> section. In the default calendar, country-specific national holidays are not taken into account, it reflects only the usual composition of the weeks in the calendar periods.</p>
<pre><code>![Text](All_images/UG_CAL_image1.jpg)

**The *Calendars* section in the *Workspace* window**</code></pre>
<p>To view the details of the default calendar</p>
<pre><code>- double click on it

![Text](All_images/UG_CAL_image2.jpg)

**The default view of the default calendar**</code></pre>
</section>
<section id="set-properties" class="level5">
<h5 class="anchored" data-anchor-id="set-properties">Set Properties</h5>
<p>In the <em>Properties</em> panel the user can set:</p>
<ul>
<li><p>Frequency (monthly, quarterly..)</p></li>
<li><p>Trading days or working days regressors</p></li>
</ul>
<p><em>Trading days</em>: 6 contrast variables (<span class="math inline">\(number\ of\ Mondays - number\ of\ Sundays\)</span>,…) and one regressor for the leap year effect.</p>
<p><em>Working Days</em>: 1 contrast variable (<span class="math inline">\(number\ of\ working days (monday to friday) - number\ of\ Saturdays and Sundays\)</span>,…) and one regressor for the leap year effect.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image3.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p><strong>Modification of the initial settings for the Default calendar</strong></p>
</section>
<section id="spectrum-visualization" class="level5">
<h5 class="anchored" data-anchor-id="spectrum-visualization">Spectrum visualization</h5>
<p>The top-right panel displays the spectrum for the given calendar variable. By default, the first variable from the table is shown.</p>
<ul>
<li>To change it, click on the calendar variable header.</li>
</ul>
<p>Calendar variables shouldn’t have a peak neither at a zero frequency (trend) nor the seasonal frequencies.</p>
<p><img src="All_images/UG_CAL_image6.jpg" class="img-fluid" alt="Text"> #### Modify an existing Calendar</p>
<ul>
<li><p>click the option <em>Edit</em> from the context menu</p></li>
<li><p>the list of holidays defined for this calendar is displayed</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image12.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p><strong>Edit a calendar window</strong></p>
<ul>
<li><p>To add a holiday unfold the <strong>+</strong> menu</p></li>
<li><p>To remove a holiday click on it and choose the <strong>-</strong> button <img src="All_images/UG_CAL_image13.jpg" class="img-fluid" alt="Text"></p></li>
</ul>
<p><strong>Removing a holiday from the calendar</strong></p>
</section>
</section>
<section id="creating-a-new-calendar" class="level4">
<h4 class="anchored" data-anchor-id="creating-a-new-calendar">Creating a new calendar</h4>
<p>An appropriate calendar, containing the required national holidays, needs to be created to adjust a series for country-specific calendar effects.</p>
<ul>
<li>right click on the <em>Calendar</em> item from the <em>Workspace</em> window and choose <strong>Add</strong></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image14.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p>Three options are available:</p>
<ul>
<li><p><em>National calendars</em>: allows to include country-specific holidays</p></li>
<li><p><em>Composite calendars</em> : creates calendar as a weighted sum of several national calendars</p></li>
<li><p><em>Chained calendars</em> : allows to chain two national calendars before and after a break</p></li>
</ul>
<section id="national-calendar" class="level5">
<h5 class="anchored" data-anchor-id="national-calendar">National Calendar</h5>
<p>To define a national calendar: right click on Calendar item in the Utility panel of the workspace window</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image14.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<ul>
<li><p>To add a holiday unfold the <strong>+</strong> menu</p></li>
<li><p>To remove a holiday from the list click on it and choose the <strong>-</strong> button.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image15.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p>Four options are available here:</p>
<pre><code>- **Fixed** : holiday occurring at the same date

- **Easter Related**: holiday that depends on Easter Sunday date

- **Fixed Week**: fixed holiday that always falls in a specific week of a given month

- **Special Day**:  choose a holiday from a list of pre-defined holidays (link to table)</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image16.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<ul>
<li>to use Julian Easter</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image17.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<pre><code>**The \*Julian Easter\* option**</code></pre>
<p>To add a holiday from this list to the national calendar, choose the <em>Special day</em> item from the <em>Special days</em> list.</p>
<p><img src="All_images/UG_CAL_image18.jpg" class="img-fluid" alt="Text"> <strong>Adding a pre-defined holiday to the calendar</strong></p>
<p>By default, when the <em>Special Days</em> option is selected, JDemetra+ always adds <em>Christmas</em> to the list of selected holidays. The user can change this initial choice by specifying the settings in the panel on the right and clicking <em>OK</em>. The settings that can be changed include:</p>
<ul>
<li><p><strong>Start</strong>: starting date for the holiday (expecting <em>yyyy-mm-dd</em>) Default is the starting date of the calendar (empty cell).</p></li>
<li><p><strong>End</strong>: same as start</p></li>
<li><p><strong>Weight</strong> : specifies the impact of the holiday on the series. The default weight is 1 (full weight) assuming that the influence of the holiday is the same as a regular Sunday. If less the a value between 0 and 1 can be assigned.</p></li>
<li><p><strong>Day event</strong>: a list of pre-defined holidays (link to table)</p></li>
<li><p><strong>Offset</strong>: allows to set a holiday as related to a pre-specified holiday by specifying the distance in days (e.g Easter Sunday). Default offset is 1. It can be positive or negative. Positive offset: defines a holiday following the pre-specified holiday. Negative offset: defines a holiday preceding the selected pre-specified.</p>
<p><img src="All_images/UG_CAL_image19.jpg" class="img-fluid" alt="Text"> <strong>Choosing a pre-defined holiday from the list</strong></p></li>
<li><p>To define a fixed holiday not included in the list of pre-defined holidays:</p>
<ul>
<li>choose <em>Fixed</em> from the <em>Special days</em> list: by default January, 1 is displayed. Specify the settings:</li>
</ul></li>
<li><p><strong>Start</strong>: starting date for the holiday (expecting <em>yyyy-mm-dd</em>) Default is the starting date of the calendar (empty cell).</p></li>
<li><p><strong>End</strong>: same as start</p></li>
<li><p><strong>Weight</strong> : specifies the impact of the holiday on the series. The default weight is 1 (full weight) assuming that the influence of the holiday is the same as a regular Sunday. If less the a value between 0 and 1 can be assigned.</p></li>
<li><p><strong>Day</strong>: day of month when the fixed holiday is celebrated.</p></li>
<li><p><strong>Month</strong>: month, in which the fixed holiday is celebrated.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image20.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p><strong>Options for a fixed holiday</strong></p>
<ul>
<li><p>Add <em>Corpus Christi</em>: example of an Easter related holiday not included in the special day list(link to table). It is is a moving holiday celebrated 60 days after Easter</p>
<ul>
<li>choose the <em>Easter related</em> item from the <em>Special days</em> list.</li>
</ul>
<p><img src="All_images/UG_CAL_image22.jpg" class="img-fluid" alt="Text"> By default <em>Easter + 1</em> is displayed. Setting can be changed :</p></li>
<li><p><strong>Start</strong>: starting date for the holiday (expecting <em>yyyy-mm-dd</em>) Default is the starting date of the calendar (empty cell).</p></li>
<li><p><strong>End</strong>: same as start</p></li>
<li><p><strong>Weight</strong> : specifies the impact of the holiday on the series. The default weight is 1 (full weight) assuming that the influence of the holiday is the same as a regular Sunday. If less the a value between 0 and 1 can be assigned.</p></li>
<li><p><strong>Offset</strong>: To define Corpus Christi enter <strong>60</strong>, as it is celebrated 60 days after Easter Sunday.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image23.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<ul>
<li><p>Fixed week option: when dealing with holidays occurring on the same week of a given month. Example: Labour Day in the USA and Canada, celebrated on the first Monday of September in Canada</p>
<ul>
<li>choose <em>Fixed Week</em> from the <em>Special days</em> list.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image24.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div></li>
</ul>
<p>Available settings are:</p>
<ul>
<li><p><strong>Start</strong>: starting date for the holiday (expecting <em>yyyy-mm-dd</em>) Default is the starting date of the calendar (empty cell).</p></li>
<li><p><strong>End</strong>: same as start</p></li>
<li><p><strong>Weight</strong> : specifies the impact of the holiday on the series. The default weight is 1 (full weight) assuming that the influence of the holiday is the same as a regular Sunday. If less the a value between 0 and 1 can be assigned</p></li>
<li><p><strong>Day of Week</strong>: day of week when the holiday is celebrated each year</p></li>
<li><p><strong>Month</strong>: month, in which the holiday is celebrated each year</p></li>
<li><p><strong>Week</strong>: number denoting the place of the week in the month: between 1 and 5</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image25.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p>The list of the holidays should contain only unique entries. Otherwise, a warning, as shown in the picture below, will be displayed.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image26.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p>A calendar without a name cannot be saved. Fill the <em>Name</em> box before saving the calendar.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image27.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p>Example : final view of a properly defined calendar for Poland</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image28.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p>The calendar is visible in the <em>Workspace</em> window</p>
<ul>
<li>To display the available options right-click on it</li>
</ul>
<p>A national calendar can be edited, duplicated (to create another calendar) and/or analysed (double click to display it in the panel on the right) or deleted.</p>
</section>
<section id="chained-calendar" class="level5">
<h5 class="anchored" data-anchor-id="chained-calendar">Chained Calendar</h5>
<p>Creating a chained calendar is relevant when a major break occurs in the definition of the country-specific holidays.</p>
<p>First define the 2 (or <span class="math inline">\(N\)</span>) national calendars corresponding to each regime as explained in the section above.</p>
<p>To define a chained calendar: right click on Calendar item in the Utility panel of the workspace window</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image14.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p>In the <em>Properties</em> panel specify:</p>
<ul>
<li><p>first and the second calendar</p></li>
<li><p>break date</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image32.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
</section>
<section id="composite-calendar" class="level5">
<h5 class="anchored" data-anchor-id="composite-calendar">Composite Calendar</h5>
<p>Creating a chained calendar is relevant when correcting series which include data from more than one country/region. This option can be used, for example, to create the calendar for the European Union or to create the national calendar for a country, in which regional holidays are celebrated.</p>
<p>First define the relevant national calendars corresponding to each member state/region as explained above.</p>
<p>To define a chained calendar: right click on Calendar item in the Utility panel of the workspace window</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image34.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<ul>
<li><p>Fill the name box</p></li>
<li><p>Mark the regional calendars to be used</p></li>
<li><p>Assign a weight to each calendar.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image35.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="importing-an-existing-calendar-from-a-file" class="level4">
<h4 class="anchored" data-anchor-id="importing-an-existing-calendar-from-a-file">Importing an existing calendar from a file</h4>
<p>Right click on the <em>Calendar</em> item from the <em>Workspace</em> window and choose the <em>Import</em> item from the menu.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image8.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p><strong>Importing a calendar to JDemetra+</strong></p>
<ul>
<li>choose the appropriate file and open it</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image10.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p><strong>Choosing the file</strong></p>
<p>JDemetra+ adds it to the calendars list</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image11.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>
<p><strong>A list of calendars with a newly imported calendar</strong></p>
<section id="example-of-a-calendar-file" class="level5">
<h5 class="anchored" data-anchor-id="example-of-a-calendar-file">Example of a calendar file</h5>
<p>example of a html file containing a calendar</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/UG_CAL_image9.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Text</figcaption><p></p>
</figure>
</div>


</section>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>In case of SEATS the properties can be trivially derived from the matrix formulation of signal extraction. They are also valid for X-11 (additive).<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>GÓMEZ, V., and MARAVALL, A (2001b).<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>In fact, astronomical observations show that the equinox occurs on 20 March in most years.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./A-outlier-detection.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Outlier detection</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./A-benchmarking.html" class="pagination-link">
        <span class="nav-page-text">Benchmarking and temporal disagreggation</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>